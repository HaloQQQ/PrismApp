<UserControl
    x:Class="CustomControlsDemoModule.Views.FiveChessView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:CustomControlsDemoModule.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:CustomControlsDemoModule.Models"
    xmlns:prism="http://prismlibrary.com/"
    prism:ViewModelLocator.AutoWireViewModel="True"
    FocusVisualStyle="{x:Null}"
    MyAttachProperty.IsElementFocused="True">
    <prism:Dialog.WindowStyle>
        <Style BasedOn="{StaticResource WithoutTitleBar}" TargetType="Window">
            <Setter Property="MinWidth" Value="1200" />
            <Setter Property="MinHeight" Value="640" />
        </Style>
    </prism:Dialog.WindowStyle>

    <UserControl.Resources>
        <ResourceDictionary>
            <Style x:Key="Singal" TargetType="Ellipse">
                <Setter Property="Stroke" Value="Yellow" />
                <Setter Property="StrokeThickness" Value="4" />

                <Setter Property="Width" Value="35" />
                <Setter Property="Height" Value="35" />

                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect BlurRadius="6" ShadowDepth="3" />
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate x:Key="Chess" DataType="models:ChessModel">
                <Button Command="{Binding PressCommand}" CommandParameter="{Binding DataContext.IsWhiteTurn, RelativeSource={RelativeSource AncestorType=UserControl}}">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Ellipse
                                Margin="{TemplateBinding Margin}"
                                Fill="{TemplateBinding Background}"
                                Stroke="{TemplateBinding BorderBrush}"
                                StrokeDashArray="5 2">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Width" Value="38" />
                                        <Setter Property="Height" Value="38" />

                                        <Setter Property="StrokeThickness" Value="1" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsSucceed}" Value="True">
                                                <Setter Property="Width" Value="36" />
                                                <Setter Property="Height" Value="36" />

                                                <Setter Property="StrokeThickness" Value="2" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </ControlTemplate>
                    </Button.Template>

                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="BorderBrush" Value="Transparent" />
                            <Setter Property="Background" Value="Transparent" />

                            <Setter Property="Margin" Value="0" />
                            <Setter Property="Padding" Value="0" />

                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsSucceed}" Value="True">
                                    <Setter Property="BorderBrush" Value="Red" />
                                </DataTrigger>

                                <DataTrigger Binding="{Binding IsWhite}" Value="True">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <RadialGradientBrush Center="0.3,0.3" GradientOrigin="0.3,0.3" RadiusX="0.4" RadiusY="0.4">
                                                <GradientStop Color="White" />
                                                <GradientStop Offset="0.2" Color="LightGray" />
                                                <GradientStop Offset="1" Color="White" />
                                            </RadialGradientBrush>
                                        </Setter.Value>
                                    </Setter>

                                    <Setter Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect
                                                BlurRadius="3"
                                                Opacity="0.6"
                                                ShadowDepth="6" />
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding IsWhite}" Value="False">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <RadialGradientBrush Center="0.3,0.3" GradientOrigin="0.3,0.3" RadiusX="0.4" RadiusY="0.4">
                                                <GradientStop Color="White" />
                                                <GradientStop Offset="0.2" Color="LightGray" />
                                                <GradientStop Offset="1" Color="Black" />
                                            </RadialGradientBrush>
                                        </Setter.Value>
                                    </Setter>

                                    <Setter Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect
                                                BlurRadius="3"
                                                Opacity="0.6"
                                                ShadowDepth="6" />
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding IsWhite}" Value="{x:Null}" />
                                        <Condition Binding="{Binding DataContext.IsWhiteTurn, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True" />
                                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Background" Value="{StaticResource LightWhite}" />

                                    <Setter Property="BorderBrush" Value="White" />
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding IsWhite}" Value="{x:Null}" />
                                        <Condition Binding="{Binding DataContext.IsWhiteTurn, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="False" />
                                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True" />
                                    </MultiDataTrigger.Conditions>

                                    <Setter Property="Background" Value="{StaticResource LightWhite}" />

                                    <Setter Property="BorderBrush" Value="Black" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </DataTemplate>

            <Style x:Key="UnUsedMark" TargetType="Ellipse">
                <Setter Property="Fill" Value="Black" />
                <Setter Property="Width" Value="10" />
                <Setter Property="Height" Value="10" />
            </Style>

            <Style
                x:Key="HorizentalLable"
                BasedOn="{StaticResource ThemeBlk}"
                TargetType="TextBlock">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="Canvas.Left" Value="590" />
            </Style>

            <Style
                x:Key="VerticalLable"
                BasedOn="{StaticResource ThemeBlk}"
                TargetType="TextBlock">
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="Canvas.Top" Value="590" />
            </Style>

            <Style
                x:Key="FunctionButton"
                BasedOn="{StaticResource IconButtonBase_Big_Scale_SkyBlue}"
                TargetType="Button">
                <Setter Property="Margin" Value="10,0" />

                <Setter Property="FontSize" Value="40" />

                <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            </Style>

            <Style
                x:Key="StartPauseButton"
                BasedOn="{StaticResource FunctionButton}"
                TargetType="Button">
                <Setter Property="Content" Value="&#xe87c;" />

                <Setter Property="Command" Value="{Binding StartPauseCommand}" />

                <Setter Property="ToolTip" Value="{Binding KeyGestureDic[播放/暂停].ToolTip}" />

                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsUsable}" Value="True">
                        <Setter Property="Content" Value="&#xe62a;" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style
                x:Key="RePlayButton"
                BasedOn="{StaticResource FunctionButton}"
                TargetType="Button">
                <Setter Property="FontSize" Value="30" />

                <Setter Property="Command" Value="{Binding RePlayCommand}" />
                <Setter Property="Content" Value="&#xe63e;" />

                <Setter Property="ToolTip" Value="{Binding KeyGestureDic[重玩].ToolTip}" />
            </Style>

            <Style
                x:Key="CancelLastButton"
                BasedOn="{StaticResource FunctionButton}"
                TargetType="Button">
                <Setter Property="FontSize" Value="30" />

                <Setter Property="Command" Value="{Binding CancelLastCommand}" />
                <Setter Property="Content" Value="&#xe651;" />

                <Setter Property="ToolTip" Value="{Binding KeyGestureDic[悔棋].ToolTip}" />
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.InputBindings>
        <KeyBinding
            Key="{Binding KeyGestureDic[重玩].SelectedKey}"
            Command="{Binding RePlayCommand}"
            Modifiers="{Binding KeyGestureDic[重玩].ModifierKey}" />

        <KeyBinding
            Key="{Binding KeyGestureDic[播放/暂停].SelectedKey}"
            Command="{Binding StartPauseCommand}"
            Modifiers="{Binding KeyGestureDic[播放/暂停].ModifierKey}" />

        <KeyBinding
            Key="{Binding KeyGestureDic[悔棋].SelectedKey}"
            Command="{Binding CancelLastCommand}"
            Modifiers="{Binding KeyGestureDic[悔棋].ModifierKey}" />
    </UserControl.InputBindings>

    <Grid>
        <DockPanel>
            <WindowTitleBar DockPanel.Dock="Top" />

            <Viewbox DockPanel.Dock="Bottom" Stretch="Uniform">
                <StackPanel>
                    <UniformGrid
                        Height="80"
                        Background="Red"
                        Columns="3">
                        <Grid Background="#2874A6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Image
                                Grid.RowSpan="2"
                                Margin="5"
                                Source="../../Resources/Images/默认头像.png" />

                            <TextBlock
                                Grid.Column="1"
                                HorizontalAlignment="Left"
                                Style="{StaticResource ThemeBlk}"
                                Text="黑方" />

                            <Ellipse
                                Grid.Row="1"
                                Grid.Column="1"
                                HorizontalAlignment="Left">
                                <Ellipse.Fill>
                                    <RadialGradientBrush Center="0.3,0.3" GradientOrigin="0.3,0.3" RadiusX="0.4" RadiusY="0.4">
                                        <GradientStop Color="White" />
                                        <GradientStop Offset="0.2" Color="LightGray" />
                                        <GradientStop Offset="1" Color="Black" />
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                                <Ellipse.Style>
                                    <Style BasedOn="{StaticResource Singal}" TargetType="Ellipse">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsWhiteTurn}" Value="True">
                                                <Setter Property="Stroke" Value="Transparent" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </Grid>

                        <WrapPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Button Style="{StaticResource RePlayButton}" />

                            <Button FontSize="38" Style="{StaticResource StartPauseButton}" />

                            <Button Style="{StaticResource CancelLastButton}" />
                        </WrapPanel>

                        <Grid Background="#DC7633">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="60" />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <TextBlock
                                Grid.Column="0"
                                HorizontalAlignment="Right"
                                Style="{StaticResource ThemeBlk}"
                                Text="白方" />

                            <Ellipse
                                Grid.Row="1"
                                Grid.Column="0"
                                HorizontalAlignment="Right">
                                <Ellipse.Fill>
                                    <RadialGradientBrush Center="0.3,0.3" GradientOrigin="0.3,0.3" RadiusX="0.4" RadiusY="0.4">
                                        <GradientStop Color="White" />
                                        <GradientStop Offset="0.2" Color="LightGray" />
                                        <GradientStop Offset="1" Color="White" />
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                                <Ellipse.Style>
                                    <Style BasedOn="{StaticResource Singal}" TargetType="Ellipse">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsWhiteTurn}" Value="False">
                                                <Setter Property="Stroke" Value="Transparent" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>

                            <Image
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                Margin="5"
                                Source="../../Resources/Images/默认头像.png" />
                        </Grid>
                    </UniformGrid>

                    <Grid>
                        <!--<Viewport3D Width="610" Height="610">
                        <Viewport3D.Camera>
                            <PerspectiveCamera
                                FarPlaneDistance="450"
                                FieldOfView="420"
                                LookDirection="0,-5,1"
                                NearPlaneDistance="1"
                                Position="2,6,4"
                                UpDirection="0,100,2" />
                        </Viewport3D.Camera>

                        <Viewport3D.Children>
                            <ModelVisual3D>
                                <ModelVisual3D.Content>
                                    <Model3DGroup>
                                        <AmbientLight Color="Gray" />
                                        <DirectionalLight Direction="1,-2,-3" Color="Gray" />

                                        <GeometryModel3D>
                                            <GeometryModel3D.Geometry>
                                                <MeshGeometry3D Positions="                                                                                                           -2,-1,-2   2,-1,-2   2,-1, 2  -2,-1, 2                                                                      -2,-1, 2   2,-1, 2   2, 1, 2  -2, 1, 2                                                                     2,-1, 2   2,-1,-2   2, 1,-2   2, 1, 2                                                                           2, 1, 2   2, 1,-2  -2, 1,-2  -2, 1, 2                                                                 -2,-1, 2  -2, 1, 2  -2, 1,-2  -2,-1,-2                                                                              -2,-1,-2  -2, 1,-2   2, 1,-2   2,-1,-2                                                                             " TriangleIndices="                    0  1  2     2  3  0                    4  5  6     6  7  4                    8  9 10    10 11  8                   12 13 14    14 15 12                   16 17 18    18 19 16                   20 21 22    22 23 20                   " />
                                            </GeometryModel3D.Geometry>

                                            <GeometryModel3D.Material>
                                                <DiffuseMaterial Brush="LightBlue" />
                                            </GeometryModel3D.Material>
                                        </GeometryModel3D>
                                    </Model3DGroup>
                                </ModelVisual3D.Content>

                            </ModelVisual3D>
                        </Viewport3D.Children>
                    </Viewport3D>-->

                        <Border
                            Margin="0,10"
                            Padding="20"
                            Background="#f8cc06"
                            CornerRadius="5">
                            <Grid>
                                <Canvas Width="610" Height="610">
                                    <Path
                                        Canvas.Left="10"
                                        Canvas.Top="10"
                                        Stroke="Black"
                                        StrokeThickness="1">
                                        <Path.Data>
                                            <GeometryGroup>
                                                <RectangleGeometry Rect="0,0,560,560" />

                                                <LineGeometry StartPoint="0,40" EndPoint="560,40" />
                                                <LineGeometry StartPoint="0,80" EndPoint="560,80" />
                                                <LineGeometry StartPoint="0,120" EndPoint="560,120" />
                                                <LineGeometry StartPoint="0,160" EndPoint="560,160" />
                                                <LineGeometry StartPoint="0,200" EndPoint="560,200" />
                                                <LineGeometry StartPoint="0,240" EndPoint="560,240" />
                                                <LineGeometry StartPoint="0,280" EndPoint="560,280" />
                                                <LineGeometry StartPoint="0,320" EndPoint="560,320" />
                                                <LineGeometry StartPoint="0,360" EndPoint="560,360" />
                                                <LineGeometry StartPoint="0,400" EndPoint="560,400" />
                                                <LineGeometry StartPoint="0,440" EndPoint="560,440" />
                                                <LineGeometry StartPoint="0,480" EndPoint="560,480" />
                                                <LineGeometry StartPoint="0,520" EndPoint="560,520" />

                                                <LineGeometry StartPoint="40,0" EndPoint="40,560" />
                                                <LineGeometry StartPoint="80,0" EndPoint="80,560" />
                                                <LineGeometry StartPoint="120,0" EndPoint="120,560" />
                                                <LineGeometry StartPoint="160,0" EndPoint="160,560" />
                                                <LineGeometry StartPoint="200,0" EndPoint="200,560" />
                                                <LineGeometry StartPoint="240,0" EndPoint="240,560" />
                                                <LineGeometry StartPoint="280,0" EndPoint="280,560" />
                                                <LineGeometry StartPoint="320,0" EndPoint="320,560" />
                                                <LineGeometry StartPoint="360,0" EndPoint="360,560" />
                                                <LineGeometry StartPoint="400,0" EndPoint="400,560" />
                                                <LineGeometry StartPoint="440,0" EndPoint="440,560" />
                                                <LineGeometry StartPoint="480,0" EndPoint="480,560" />
                                                <LineGeometry StartPoint="520,0" EndPoint="520,560" />
                                            </GeometryGroup>
                                        </Path.Data>
                                    </Path>

                                    <Ellipse
                                        Canvas.Left="125"
                                        Canvas.Top="125"
                                        Style="{StaticResource UnUsedMark}" />
                                    <Ellipse
                                        Canvas.Left="445"
                                        Canvas.Top="125"
                                        Style="{StaticResource UnUsedMark}" />
                                    <Ellipse
                                        Canvas.Left="285"
                                        Canvas.Top="285"
                                        Style="{StaticResource UnUsedMark}" />
                                    <Ellipse
                                        Canvas.Left="125"
                                        Canvas.Top="445"
                                        Style="{StaticResource UnUsedMark}" />
                                    <Ellipse
                                        Canvas.Left="445"
                                        Canvas.Top="445"
                                        Style="{StaticResource UnUsedMark}" />

                                    <TextBlock
                                        Canvas.Top="0"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="15" />
                                    <TextBlock
                                        Canvas.Top="40"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="14" />
                                    <TextBlock
                                        Canvas.Top="80"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="13" />
                                    <TextBlock
                                        Canvas.Top="120"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="12" />
                                    <TextBlock
                                        Canvas.Top="160"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="11" />
                                    <TextBlock
                                        Canvas.Top="200"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="10" />
                                    <TextBlock
                                        Canvas.Top="240"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="9" />
                                    <TextBlock
                                        Canvas.Top="280"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="8" />
                                    <TextBlock
                                        Canvas.Top="320"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="7" />
                                    <TextBlock
                                        Canvas.Top="360"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="6" />
                                    <TextBlock
                                        Canvas.Top="400"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="5" />
                                    <TextBlock
                                        Canvas.Top="440"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="4" />
                                    <TextBlock
                                        Canvas.Top="480"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="3" />
                                    <TextBlock
                                        Canvas.Top="520"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="2" />
                                    <TextBlock
                                        Canvas.Top="560"
                                        Style="{StaticResource HorizentalLable}"
                                        Text="1" />

                                    <TextBlock
                                        Canvas.Left="5"
                                        Style="{StaticResource VerticalLable}"
                                        Text="A" />
                                    <TextBlock
                                        Canvas.Left="45"
                                        Style="{StaticResource VerticalLable}"
                                        Text="B" />
                                    <TextBlock
                                        Canvas.Left="85"
                                        Style="{StaticResource VerticalLable}"
                                        Text="C" />
                                    <TextBlock
                                        Canvas.Left="125"
                                        Style="{StaticResource VerticalLable}"
                                        Text="D" />
                                    <TextBlock
                                        Canvas.Left="165"
                                        Style="{StaticResource VerticalLable}"
                                        Text="E" />
                                    <TextBlock
                                        Canvas.Left="205"
                                        Style="{StaticResource VerticalLable}"
                                        Text="F" />
                                    <TextBlock
                                        Canvas.Left="245"
                                        Style="{StaticResource VerticalLable}"
                                        Text="G" />
                                    <TextBlock
                                        Canvas.Left="285"
                                        Style="{StaticResource VerticalLable}"
                                        Text="H" />
                                    <TextBlock
                                        Canvas.Left="325"
                                        Style="{StaticResource VerticalLable}"
                                        Text="I" />
                                    <TextBlock
                                        Canvas.Left="365"
                                        Style="{StaticResource VerticalLable}"
                                        Text="J" />
                                    <TextBlock
                                        Canvas.Left="405"
                                        Style="{StaticResource VerticalLable}"
                                        Text="K" />
                                    <TextBlock
                                        Canvas.Left="445"
                                        Style="{StaticResource VerticalLable}"
                                        Text="L" />
                                    <TextBlock
                                        Canvas.Left="485"
                                        Style="{StaticResource VerticalLable}"
                                        Text="M" />
                                    <TextBlock
                                        Canvas.Left="525"
                                        Style="{StaticResource VerticalLable}"
                                        Text="N" />
                                    <TextBlock
                                        Canvas.Left="565"
                                        Style="{StaticResource VerticalLable}"
                                        Text="O" />
                                </Canvas>

                                <ListBox
                                    Width="602"
                                    Height="602"
                                    ItemTemplate="{StaticResource Chess}"
                                    ItemsSource="{Binding Datas}">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="15" Rows="15" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.RenderTransform>
                                        <TranslateTransform X="-14" Y="-14" />
                                    </ListBox.RenderTransform>
                                </ListBox>
                            </Grid>
                        </Border>

                        <Grid Background="#AA999999" Visibility="{Binding IsUsable, Converter={StaticResource BoolToCollapsedVisibleConverter}}">
                            <Button
                                FontSize="80"
                                Foreground="Gray"
                                Style="{StaticResource StartPauseButton}"
                                Visibility="{Binding IsGameOver, Converter={StaticResource BoolToCollapsedVisibleConverter}}" />

                            <Button
                                FontSize="80"
                                Foreground="Gray"
                                Style="{StaticResource RePlayButton}"
                                Visibility="{Binding IsGameOver, Converter={StaticResource BoolToVisibleCollapsedConverter}}" />
                        </Grid>
                    </Grid>
                </StackPanel>
            </Viewbox>
        </DockPanel>
    </Grid>
</UserControl>
